
The issue is that time_id is not available for days when there are no lessons scheduled, which causes a NoReverseMatch error when trying to generate the URL with an empty time_id. To resolve this, you need to ensure that the "+" link is only rendered when there is a valid time_id.

Fixing the Issue in the Template
You need to adjust your template logic to ensure that the link to create a lesson is only displayed when there is a valid time_id. This involves checking that time_id is not empty or undefined before attempting to render the link.

Here's how you can adjust the template to handle this:

html
Копировать код
{% block content %}
<h1>Weekly Schedule</h1>
<div>
    {% for day, lessons in weekly_lessons.items %}
        <h2>{{ day }}</h2>
        {% if lessons %}
            <ul>
                {% for lesson, time_id in lessons %}
                    <li>{{ lesson.group_name }} - {{ lesson.subject.name }} ({{ lesson.time_slot.start_time }} to {{ lesson.time_slot.end_time }})</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No lessons scheduled for this day.</p>
        {% endif %}
    {% endfor %}
</div>
{% endblock %}