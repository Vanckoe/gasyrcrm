{% extends "core/base.html" %}
{% load static %}
{% block body-classes %}bg-accent-red{% endblock %}
{% block content %}

    {% include 'core/components/navbar-light-transparent.html' %}
    <div class="absolute top-0 bottom-0 left-0 right-0 -z-10 bg-no-repeat bg-cover bg-top"
         style="background-image: url('{% static "core/images/background-stars.png" %}')"></div>
    <div class="container content mx-auto relative font-[Qanelas]">
        <div class="absolute left-24 top-0 -bottom-5 -z-10">
            <img class="h-full" src="{% static "core/images/login-guy.png" %}" alt="">
        </div>
        <div class="absolute bg-white rounded-lg bottom-36 left-36 py-6 px-8 text-center">
            <h2 class="text-2xl text-black-main font-bold">Халыкбердиев Якуб</h2>
            <p class="text-sm text-black-main font-medium">Основатель школы</p>
        </div>
        <div class="absolute top-16 bottom-0 right-32">
            <div class="bg-light-gray rounded-lg text-center px-7 pb-11 pt-12">
                <h2 class="font-bold text-2xl mb-5 text-black-main">Вход на платформу</h2>
                <form class="mb-7" method="post" action="{% url 'users:login' %}">
                    {% csrf_token %}
                    <div class="relative mb-1.5">
                        <input class="pl-14 py-6 border rounded-lg placeholder:text-black-main placeholder:text-lg" style="width: 340px"
                               type="text" name="phone_number"
                               id="id_phone_number" value="+7 (___) ___ __ __" required>
                        <div class="absolute top-7 left-2 pl-3
                                    flex items-center
                                    pointer-events-none">
                            <img src="{% static "core/icons/kz.png" %}" alt="">
                        </div>
                    </div>
                    <input class="pl-4 py-6 border rounded-lg placeholder:text-black-main placeholder:text-base" style="width: 340px"
                           type="password" name="password" id="id_password" placeholder="Введите ваш пароль" required><br><br>
                    <button class="bg-accent-red rounded-lg py-6 font-semibold text-white" style="width: 340px; letter-spacing: 0.01rem" type="submit">Войти на платформу</button>
                </form>
                <div>
                    <h4 class="text-black-main font-semibold text-lg mb-2.5">Войти через соц. сети</h4>
                    <div>
                        <a class="p-6 border border-gray bg-white rounded-full inline-block" href="#">
                            <img src="{% static "core/icons/google-icon-svgrepo-com.svg" %}" alt="">
                        </a>
                        <a class="p-6 border border-gray bg-white rounded-full inline-block" href="#">
                            <img src="{% static "core/icons/vk-svgrepo-com.svg" %}" alt="">
                        </a>
                    </div>
                    <a class="text-black-main font-light underline" href="#">
                        Проблемы со входом?
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% include "core/components/footer.html" %}

    <!-- Include jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Include Inputmask -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/inputmask/5.0.5/jquery.inputmask.min.js"></script>

    <script>
        document.getElementById('id_phone_number').addEventListener('input', function (e) {
            formatPhoneNumber(e);
        });

        function formatPhoneNumber(e) {
            var input = e.target.value.replace(/[^\d]/g, ''); // Remove all non-numeric characters

            // Ensure the input starts with '7' (the country code for Kazakhstan)
            if (!input.startsWith('7')) {
                input = '7' + input;
            }

            // Limit the length to 11 digits (including the country code '7')
            input = input.substring(0, 11);

            var formattedInput = '+7 ('; // Start with the country code and opening parenthesis

            // Remove the country code ('7') and then format the rest
            input = input.substring(1); // Remove the '7' to start formatting

            // Dynamically add formatting based on the current length of the input
            for (var i = 0; i < input.length; i++) {
                if (i === 3) {
                    formattedInput += ') '; // Close the parenthesis after the area code
                } else if (i === 6 || i === 8) {
                    formattedInput += ' - '; // Add dashes after the 6th and 8th digits
                }
                formattedInput += input[i];
            }

            // Update the input field with the dynamically formatted value
            e.target.value = formattedInput;
        }
    </script>
{% endblock %}