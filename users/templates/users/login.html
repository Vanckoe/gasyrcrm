<h2>Login</h2>
<form method="post" action="{% url 'users:login' %}">
    {% csrf_token %}
    <label for="id_phone_number">Phone number:</label>
    <input type="text" name="phone_number" id="id_phone_number" required><br><br>

    <label for="id_password">Password:</label>
    <input type="password" name="password" id="id_password" required><br><br>

    <button type="submit">Login</button>
</form>

<!-- Include jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Include Inputmask -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/inputmask/5.0.5/jquery.inputmask.min.js"></script>

<script>
    document.getElementById('id_phone_number').addEventListener('input', function (e) {
    formatPhoneNumber(e);
});

function formatPhoneNumber(e) {
    var input = e.target.value.replace(/[^\d]/g, ''); // Remove all non-numeric characters

    // Ensure the input starts with '7' (the country code for Kazakhstan)
    if (!input.startsWith('7')) {
        input = '7' + input;
    }

    // Limit the length to 11 digits (including the country code '7')
    input = input.substring(0, 11);

    var formattedInput = '+7 ('; // Start with the country code and opening parenthesis

    // Remove the country code ('7') and then format the rest
    input = input.substring(1); // Remove the '7' to start formatting

    // Dynamically add formatting based on the current length of the input
    for (var i = 0; i < input.length; i++) {
        if (i === 3) {
            formattedInput += ') '; // Close the parenthesis after the area code
        } else if (i === 6 || i === 8) {
            formattedInput += ' - '; // Add dashes after the 6th and 8th digits
        }
        formattedInput += input[i];
    }

    // Update the input field with the dynamically formatted value
    e.target.value = formattedInput;
}
</script>