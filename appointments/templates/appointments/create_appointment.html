
{% block content %}
<h2>Create Appointment</h2>
<form id="appointmentForm">
    <label for="date">Date:</label>
    <input type="date" id="date" name="date" required><br>
    <label for="start_time">Start Time:</label>
    <input type="time" id="start_time" name="start_time" required><br>
    <label for="end_time">End Time:</label>
    <input type="time" id="end_time" name="end_time" required><br>
    <label for="link">Link (optional):</label>
    <input type="url" id="link" name="link"><br>
    <input type="button" value="Submit" onclick="submitAppointment()">
</form>
<script>
function submitAppointment() {
    const formData = {
        date: document.getElementById('date').value,
        start_time: document.getElementById('start_time').value,
        end_time: document.getElementById('end_time').value,
        link: document.getElementById('link').value
    };

    fetch('http://127.0.0.1:8000/appointments/api/appointments/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}'
        },
        body: JSON.stringify(formData)
    }).then(response => response.json())
    .then(data => alert('Appointment created!'))
    .catch(error => console.error('Error:', error));
}
</script>
{% endblock %}
